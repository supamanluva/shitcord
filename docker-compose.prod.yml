services:
  shitcord:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: shitcord
    restart: unless-stopped
    environment:
      PORT: 8080
      HOST: 0.0.0.0
      DB_DRIVER: sqlite
      DB_PATH: /app/data/shitcord.db
      JWT_SECRET: ${JWT_SECRET}
      JWT_EXPIRY_HOURS: 72
      ENCRYPTION_KEY: ${ENCRYPTION_KEY}
      FRONTEND_DIR: /app/frontend-dist
      ALLOWED_ORIGINS: ${ALLOWED_ORIGINS}
      STUN_SERVER: stun:stun.l.google.com:19302
      MAX_UPLOAD_SIZE_MB: 50
      UPLOAD_DIR: /app/uploads
    volumes:
      - shitcord-data:/app/data
      - shitcord-uploads:/app/uploads
    networks:
      - nginx_default

networks:
  nginx_default:
    external: true

volumes:
  shitcord-data:
  shitcord-uploads:
